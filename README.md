# hubhub-template
Generated by [Rojo](https://github.com/rojo-rbx/rojo) 7.6.1.

## Getting Started

### Prerequisites
This project uses [Aftman](https://github.com/LPGhatguy/aftman) to manage tooling. Install it first:

```bash
cargo install aftman
# or
gh release download -R LPGhatguy/aftman -p '*-linux.zip' && unzip aftman-*-linux.zip && mv aftman ~/.local/bin/
```

Then install all project tools:

```bash
aftman install
```

This will install:
- **Rojo** - Sync your code to Roblox Studio
- **Selene** - Lua/Luau linter
- **StyLua** - Code formatter
- **Luau LSP** - Language server with type checking

### Building

To build the place from scratch, use:

```bash
rojo build -o "hubhub-template.rbxlx"
```

Next, open `hubhub-template.rbxlx` in Roblox Studio and start the Rojo server:

```bash
rojo serve
```

For more help, check out [the Rojo documentation](https://rojo.space/docs).

## Development Tools

### Code Quality

This project includes several tools to maintain code quality:

#### Linting with Selene
Run the linter to check for code issues:

```bash
selene src/
```

Configuration is in `selene.toml`.

#### Code Formatting with StyLua
Format your code automatically:

```bash
stylua src/
```

Check if code is formatted without modifying files:

```bash
stylua --check src/
```

Configuration is in `stylua.toml`.

#### Type Checking with Luau LSP
First, download the Roblox type definitions (if not already present):

```bash
curl -L -o globalTypes.d.luau https://raw.githubusercontent.com/JohnnyMorganz/luau-lsp/main/scripts/globalTypes.d.luau
```

Then generate a sourcemap and run type checking:

```bash
rojo sourcemap default.project.json --output sourcemap.json
luau-lsp analyze --sourcemap=sourcemap.json --definitions=globalTypes.d.luau src/
```

Configuration is in `.luaurc`. The `globalTypes.d.luau` file contains comprehensive Roblox API type definitions.

### VS Code Setup

If you're using VS Code, the project includes recommended extensions. Install them for the best development experience:
- **Luau LSP** - IntelliSense and type checking
- **StyLua** - Automatic formatting
- **Selene** - Inline linting warnings
- **Rojo** - Roblox Studio integration

The workspace settings (`.vscode/settings.json`) are pre-configured to:
- Enable format-on-save
- Auto-generate sourcemaps
- Configure path aliases
- Set up type definitions

## CI/CD Pipeline

This project includes a GitHub Actions workflow that automatically tests and builds your place on every push and pull request.

### Workflow Details

The CI/CD pipeline runs in two stages:

#### 1. Lint and Type Check (runs on all pushes and PRs)
- Downloads Roblox type definitions
- Generates a Rojo sourcemap
- Runs Selene linting on the codebase
- Checks code formatting with StyLua
- Performs Luau type checking with luau-lsp

#### 2. Build (runs after linting passes)
- Builds your place file from `default.project.json`
- Uploads the built `.rbxl` file as a GitHub Actions artifact
- Artifacts are retained for 30 days

### Downloading Build Artifacts

After each successful workflow run:

1. Go to the "Actions" tab in your GitHub repository
2. Click on the workflow run you're interested in
3. Scroll down to the "Artifacts" section
4. Download the `place-file` artifact
5. Extract the `.rbxl` file and open it in Roblox Studio

### Manual Trigger

You can manually trigger the workflow from the "Actions" tab in your GitHub repository by clicking "Run workflow".

## Automated Deployment to Roblox

The `deploy/` directory contains a TypeScript bot that automatically monitors GitHub Actions and deploys successful builds to Roblox.

### Features

- ðŸ”„ Polls GitHub Actions every 30 seconds for new successful runs
- ðŸ“¦ Automatically downloads place-file artifacts
- ðŸš€ Publishes to Roblox using Open Cloud API
- ðŸ’¾ Tracks deployment state to avoid duplicate deployments
- ðŸ“Š Maintains deployment history

### Quick Start

1. **Install dependencies:**

```bash
cd deploy
npm install
```

2. **Configure environment:**

```bash
cp .env.example .env
# Edit .env with your credentials
```

3. **Build and run:**

```bash
npm run build
npm start
```

See [`deploy/README.md`](deploy/README.md) for detailed setup instructions, including:
- How to create GitHub and Roblox API tokens
- Running as a background service (systemd, PM2, Docker)
- Troubleshooting and monitoring
- Security best practices